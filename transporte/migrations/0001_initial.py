# Generated by Django 5.2.5 on 2025-08-24 11:41

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('alunos', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Motorista',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=255, verbose_name='Nome Completo')),
                ('cpf', models.CharField(max_length=14, unique=True, verbose_name='CPF')),
                ('rg', models.CharField(blank=True, max_length=20, null=True, verbose_name='RG')),
                ('data_nascimento', models.DateField(verbose_name='Data de Nascimento')),
                ('telefone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('celular', models.CharField(max_length=20, verbose_name='Celular')),
                ('endereco', models.TextField(verbose_name='Endereço')),
                ('cnh_numero', models.CharField(max_length=20, verbose_name='Número da CNH')),
                ('cnh_categoria', models.CharField(choices=[('A', 'Categoria A - Motocicletas'), ('B', 'Categoria B - Automóveis'), ('C', 'Categoria C - Caminhões'), ('D', 'Categoria D - Ônibus'), ('E', 'Categoria E - Carretas')], max_length=2, verbose_name='Categoria da CNH')),
                ('cnh_validade', models.DateField(verbose_name='Validade da CNH')),
                ('data_inicio_contrato', models.DateField(verbose_name='Início do Contrato')),
                ('data_fim_contrato', models.DateField(blank=True, null=True, verbose_name='Fim do Contrato')),
                ('salario', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Salário')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
            ],
            options={
                'verbose_name': 'Motorista',
                'verbose_name_plural': 'Motoristas',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='Rota',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=255, verbose_name='Nome da Rota')),
                ('descricao', models.TextField(blank=True, null=True, verbose_name='Descrição')),
                ('turno', models.CharField(choices=[('MATUTINO', 'Matutino'), ('VESPERTINO', 'Vespertino'), ('NOTURNO', 'Noturno'), ('INTEGRAL', 'Integral')], max_length=20, verbose_name='Turno')),
                ('horario_saida_ida', models.TimeField(verbose_name='Horário de Saída (Ida)')),
                ('horario_chegada_ida', models.TimeField(verbose_name='Horário de Chegada (Ida)')),
                ('horario_saida_volta', models.TimeField(verbose_name='Horário de Saída (Volta)')),
                ('horario_chegada_volta', models.TimeField(verbose_name='Horário de Chegada (Volta)')),
                ('ativa', models.BooleanField(default=True, verbose_name='Rota Ativa')),
                ('km_total', models.DecimalField(decimal_places=2, default=0, max_digits=6, verbose_name='KM Total da Rota')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('motorista', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='transporte.motorista', verbose_name='Motorista')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
            ],
            options={
                'verbose_name': 'Rota',
                'verbose_name_plural': 'Rotas',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='PontoParada',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=255, verbose_name='Nome do Ponto')),
                ('endereco', models.TextField(verbose_name='Endereço')),
                ('referencia', models.CharField(blank=True, max_length=255, null=True, verbose_name='Ponto de Referência')),
                ('latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True, verbose_name='Latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True, verbose_name='Longitude')),
                ('horario_ida', models.TimeField(verbose_name='Horário da Ida')),
                ('horario_volta', models.TimeField(verbose_name='Horário da Volta')),
                ('ordem', models.IntegerField(default=1, verbose_name='Ordem na Rota')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ponto Ativo')),
                ('rota', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pontos', to='transporte.rota', verbose_name='Rota')),
            ],
            options={
                'verbose_name': 'Ponto de Parada',
                'verbose_name_plural': 'Pontos de Parada',
                'ordering': ['rota', 'ordem'],
                'unique_together': {('rota', 'ordem')},
            },
        ),
        migrations.CreateModel(
            name='Veiculo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('placa', models.CharField(max_length=8, unique=True, verbose_name='Placa')),
                ('tipo_veiculo', models.CharField(choices=[('ONIBUS', 'Ônibus'), ('MICRO_ONIBUS', 'Micro-ônibus'), ('VAN', 'Van'), ('KOMBI', 'Kombi')], max_length=20, verbose_name='Tipo de Veículo')),
                ('marca', models.CharField(max_length=100, verbose_name='Marca')),
                ('modelo', models.CharField(max_length=100, verbose_name='Modelo')),
                ('ano_fabricacao', models.IntegerField(verbose_name='Ano de Fabricação')),
                ('cor', models.CharField(max_length=50, verbose_name='Cor')),
                ('capacidade_passageiros', models.IntegerField(verbose_name='Capacidade de Passageiros')),
                ('renavam', models.CharField(max_length=20, unique=True, verbose_name='RENAVAM')),
                ('chassi', models.CharField(max_length=17, unique=True, verbose_name='Chassi')),
                ('status', models.CharField(choices=[('ATIVO', 'Ativo'), ('MANUTENCAO', 'Em Manutenção'), ('INATIVO', 'Inativo')], default='ATIVO', max_length=20, verbose_name='Status')),
                ('km_atual', models.IntegerField(default=0, verbose_name='Quilometragem Atual')),
                ('data_ultima_vistoria', models.DateField(blank=True, null=True, verbose_name='Última Vistoria')),
                ('proxima_vistoria', models.DateField(blank=True, null=True, verbose_name='Próxima Vistoria')),
                ('seguradora', models.CharField(blank=True, max_length=100, null=True, verbose_name='Seguradora')),
                ('numero_apolice', models.CharField(blank=True, max_length=50, null=True, verbose_name='Número da Apólice')),
                ('validade_seguro', models.DateField(blank=True, null=True, verbose_name='Validade do Seguro')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
            ],
            options={
                'verbose_name': 'Veículo',
                'verbose_name_plural': 'Veículos',
                'ordering': ['placa'],
            },
        ),
        migrations.AddField(
            model_name='rota',
            name='veiculo',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='transporte.veiculo', verbose_name='Veículo'),
        ),
        migrations.CreateModel(
            name='ManutencaoVeiculo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_manutencao', models.CharField(choices=[('PREVENTIVA', 'Preventiva'), ('CORRETIVA', 'Corretiva'), ('REVISAO', 'Revisão'), ('VISTORIA', 'Vistoria')], max_length=20, verbose_name='Tipo de Manutenção')),
                ('descricao', models.TextField(verbose_name='Descrição do Serviço')),
                ('data_agendamento', models.DateField(verbose_name='Data do Agendamento')),
                ('data_inicio', models.DateField(blank=True, null=True, verbose_name='Data de Início')),
                ('data_conclusao', models.DateField(blank=True, null=True, verbose_name='Data de Conclusão')),
                ('oficina_prestador', models.CharField(max_length=255, verbose_name='Oficina/Prestador')),
                ('telefone_prestador', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone do Prestador')),
                ('valor_orcamento', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Valor do Orçamento')),
                ('valor_final', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Valor Final')),
                ('status', models.CharField(choices=[('AGENDADA', 'Agendada'), ('EM_ANDAMENTO', 'Em Andamento'), ('CONCLUIDA', 'Concluída'), ('CANCELADA', 'Cancelada')], default='AGENDADA', max_length=20, verbose_name='Status')),
                ('km_veiculo', models.IntegerField(verbose_name='KM do Veículo')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
                ('veiculo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='manutencoes', to='transporte.veiculo', verbose_name='Veículo')),
            ],
            options={
                'verbose_name': 'Manutenção de Veículo',
                'verbose_name_plural': 'Manutenções de Veículos',
                'ordering': ['-data_agendamento'],
            },
        ),
        migrations.CreateModel(
            name='AlunoTransporte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('responsavel_nome', models.CharField(max_length=255, verbose_name='Nome do Responsável')),
                ('responsavel_telefone', models.CharField(max_length=20, verbose_name='Telefone do Responsável')),
                ('responsavel_endereco', models.TextField(verbose_name='Endereço do Responsável')),
                ('data_inicio', models.DateField(verbose_name='Data de Início')),
                ('data_fim', models.DateField(blank=True, null=True, verbose_name='Data de Fim')),
                ('situacao', models.CharField(choices=[('ATIVO', 'Ativo'), ('SUSPENSO', 'Suspenso'), ('CANCELADO', 'Cancelado')], default='ATIVO', max_length=20, verbose_name='Situação')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transporte_info', to='alunos.aluno', verbose_name='Aluno')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
                ('ponto_desembarque', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alunos_desembarque', to='transporte.pontoparada', verbose_name='Ponto de Desembarque')),
                ('ponto_embarque', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alunos_embarque', to='transporte.pontoparada', verbose_name='Ponto de Embarque')),
                ('rota', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alunos_rota', to='transporte.rota', verbose_name='Rota')),
            ],
            options={
                'verbose_name': 'Aluno no Transporte',
                'verbose_name_plural': 'Alunos no Transporte',
                'ordering': ['aluno__nome'],
                'unique_together': {('aluno', 'rota')},
            },
        ),
        migrations.CreateModel(
            name='RegistroViagem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_viagem', models.DateField(verbose_name='Data da Viagem')),
                ('tipo_viagem', models.CharField(choices=[('IDA', 'Ida'), ('VOLTA', 'Volta')], max_length=10, verbose_name='Tipo de Viagem')),
                ('horario_saida_real', models.TimeField(blank=True, null=True, verbose_name='Horário Real de Saída')),
                ('horario_chegada_real', models.TimeField(blank=True, null=True, verbose_name='Horário Real de Chegada')),
                ('km_inicial', models.IntegerField(verbose_name='KM Inicial')),
                ('km_final', models.IntegerField(blank=True, null=True, verbose_name='KM Final')),
                ('alunos_transportados', models.IntegerField(default=0, verbose_name='Alunos Transportados')),
                ('concluida', models.BooleanField(default=False, verbose_name='Viagem Concluída')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('motorista', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='transporte.motorista', verbose_name='Motorista')),
                ('usuario_cadastro', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Usuário que Cadastrou')),
                ('rota', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='viagens', to='transporte.rota', verbose_name='Rota')),
                ('veiculo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='transporte.veiculo', verbose_name='Veículo')),
            ],
            options={
                'verbose_name': 'Registro de Viagem',
                'verbose_name_plural': 'Registros de Viagem',
                'ordering': ['-data_viagem', 'tipo_viagem'],
                'unique_together': {('rota', 'data_viagem', 'tipo_viagem')},
            },
        ),
    ]
