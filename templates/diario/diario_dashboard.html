{% extends 'base.html' %}

{% block title %}Di√°rio Eletr√¥nico - GUTO{% endblock %}

{% block extra_css %}
<style>
    .card-hover {
        transition: all 0.3s ease-in-out;
    }
    .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .stats-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .gradient-card-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .gradient-card-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .gradient-card-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .gradient-card-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    
    .pulse-animation {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: .5; }
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Header do Di√°rio Eletr√¥nico -->
    <div class="mb-8">
        <div class="bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-8 text-white shadow-xl">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold mb-2">üìö Di√°rio Eletr√¥nico</h1>
                    <p class="text-blue-100 text-lg">Sistema completo de gest√£o acad√™mica</p>
                    <p class="text-blue-200 text-sm mt-2">
                        <i class="fas fa-calendar-day mr-1"></i>
                        {{ "now"|date:"l, d \d\e F \d\e Y" }}
                    </p>
                </div>
                <div class="hidden md:block">
                    <div class="relative">
                        <div class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                            <i class="fas fa-chalkboard-teacher text-6xl text-white opacity-80"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Estat√≠sticas R√°pidas -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="gradient-card-1 rounded-2xl p-6 text-white card-hover">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-blue-100 text-sm font-medium">Turmas</p>
                    <p class="text-3xl font-bold">{{ total_turmas }}</p>
                    <p class="text-blue-200 text-xs mt-1">Ativas no sistema</p>
                </div>
                <div class="p-3 bg-white bg-opacity-20 rounded-full">
                    <i class="fas fa-users text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="gradient-card-2 rounded-2xl p-6 text-white card-hover">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-pink-100 text-sm font-medium">Aulas Hoje</p>
                    <p class="text-3xl font-bold">{{ aulas_hoje }}</p>
                    <p class="text-pink-200 text-xs mt-1">Ministradas</p>
                </div>
                <div class="p-3 bg-white bg-opacity-20 rounded-full">
                    <i class="fas fa-calendar-check text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="gradient-card-3 rounded-2xl p-6 text-white card-hover">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-cyan-100 text-sm font-medium">Avalia√ß√µes</p>
                    <p class="text-3xl font-bold">{{ avaliacoes_pendentes }}</p>
                    <p class="text-cyan-200 text-xs mt-1">
                        {% if avaliacoes_pendentes > 0 %}
                            <span class="pulse-animation">‚ö†Ô∏è Pendentes</span>
                        {% else %}
                            ‚úÖ Em dia
                        {% endif %}
                    </p>
                </div>
                <div class="p-3 bg-white bg-opacity-20 rounded-full">
                    <i class="fas fa-clipboard-list text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="gradient-card-4 rounded-2xl p-6 text-white card-hover">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-green-100 text-sm font-medium">A√ß√µes R√°pidas</p>
                    <p class="text-lg font-semibold">Acesso Direto</p>
                    <p class="text-green-200 text-xs mt-1">Para professores</p>
                </div>
                <div class="p-3 bg-white bg-opacity-20 rounded-full">
                    <i class="fas fa-bolt text-2xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- A√ß√µes R√°pidas -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
        <!-- A√ß√µes Principais -->
        <div class="lg:col-span-2">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <i class="fas fa-rocket text-blue-500 mr-3"></i>
                A√ß√µes R√°pidas
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="#" class="bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="p-3 bg-green-100 rounded-full group-hover:bg-green-200 transition-colors">
                            <i class="fas fa-plus-circle text-2xl text-green-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Registrar Aula</h3>
                            <p class="text-gray-600 text-sm">Nova aula e conte√∫do</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="p-3 bg-blue-100 rounded-full group-hover:bg-blue-200 transition-colors">
                            <i class="fas fa-user-check text-2xl text-blue-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Fazer Chamada</h3>
                            <p class="text-gray-600 text-sm">Registrar frequ√™ncia</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="p-3 bg-purple-100 rounded-full group-hover:bg-purple-200 transition-colors">
                            <i class="fas fa-edit text-2xl text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Lan√ßar Notas</h3>
                            <p class="text-gray-600 text-sm">Avalia√ß√µes e conceitos</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="p-3 bg-orange-100 rounded-full group-hover:bg-orange-200 transition-colors">
                            <i class="fas fa-chart-bar text-2xl text-orange-600"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Relat√≥rios</h3>
                            <p class="text-gray-600 text-sm">Frequ√™ncia e notas</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Avalia√ß√µes Pendentes -->
        <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
                Pend√™ncias
            </h3>
            
            {% if avaliacoes_pendentes_list %}
                <div class="space-y-3 max-h-64 overflow-y-auto">
                    {% for avaliacao in avaliacoes_pendentes_list %}
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-800 text-sm">{{ avaliacao.nome }}</h4>
                                    <p class="text-xs text-gray-600 mt-1">{{ avaliacao.turma.nome }} - {{ avaliacao.disciplina.nome }}</p>
                                    <p class="text-xs text-yellow-600 mt-1 flex items-center">
                                        <i class="fas fa-calendar-alt mr-1"></i>
                                        {{ avaliacao.data_aplicacao|date:"d/m/Y" }}
                                    </p>
                                </div>
                                <a href="#" class="text-yellow-600 hover:text-yellow-700 text-sm">
                                    <i class="fas fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="text-center py-8">
                    <i class="fas fa-check-circle text-4xl text-green-500 mb-3"></i>
                    <p class="text-gray-600">Nenhuma pend√™ncia!</p>
                    <p class="text-sm text-gray-500">Todas as avalia√ß√µes est√£o em dia</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Turmas do Professor -->
    <div class="mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-chalkboard text-indigo-500 mr-3"></i>
            Suas Turmas
        </h2>
        
        {% if turmas %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                {% for turma in turmas %}
                    <a href="#" class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 card-hover block">
                        <div class="text-center">
                            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full text-white text-2xl font-bold mb-4">
                                {{ turma.nome|slice:":2"|upper }}
                            </div>
                            
                            <h3 class="font-bold text-gray-800 text-lg mb-2">{{ turma.nome }}</h3>
                            
                            <div class="space-y-2">
                                <div class="flex items-center justify-center text-sm text-gray-600">
                                    <i class="fas fa-calendar-alt mr-2 text-blue-500"></i>
                                    <span>{{ turma.periodo_letivo }}</span>
                                </div>
                                
                                <div class="flex items-center justify-center text-sm text-gray-600">
                                    <i class="fas fa-clock mr-2 text-green-500"></i>
                                    <span>{{ turma.get_turno_display }}</span>
                                </div>
                                
                                <div class="flex items-center justify-center text-sm text-gray-600">
                                    <i class="fas fa-users mr-2 text-purple-500"></i>
                                    <span>{{ turma.get_total_alunos }} aluno{{ turma.get_total_alunos|pluralize }}</span>
                                </div>
                            </div>
                            
                            <!-- Progress Bar -->
                            <div class="mt-4">
                                <div class="bg-gray-200 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full" 
                                         style="width: {{ turma.get_percentual_ocupacao }}%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">{{ turma.get_percentual_ocupacao }}% ocupa√ß√£o</p>
                            </div>
                            
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <span class="text-blue-600 font-medium text-sm flex items-center justify-center">
                                    Acessar Di√°rio
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-12 text-center">
                <i class="fas fa-chalkboard text-6xl text-gray-300 mb-4"></i>
                <h3 class="text-xl font-semibold text-gray-600 mb-2">Nenhuma turma encontrada</h3>
                <p class="text-gray-500 mb-6">Voc√™ ainda n√£o possui turmas associadas ou n√£o h√° aulas registradas.</p>
                <a href="#" class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-plus mr-2"></i>
                    Registrar Nova Aula
                </a>
            </div>
        {% endif %}
    </div>

    <!-- Atividades Recentes -->
    <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-history text-gray-500 mr-3"></i>
            Atividades Recentes
        </h2>
        
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
            {% if aulas_recentes %}
                <div class="divide-y divide-gray-100">
                    {% for aula in aulas_recentes %}
                        <div class="p-6 hover:bg-gray-50 transition-colors">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="flex-shrink-0">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center">
                                            <i class="fas fa-chalkboard text-white"></i>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h4 class="font-semibold text-gray-800">{{ aula.disciplina.nome }}</h4>
                                        <p class="text-sm text-gray-600">{{ aula.turma.nome }}</p>
                                        <div class="flex items-center space-x-4 mt-1">
                                            <span class="text-xs text-gray-500 flex items-center">
                                                <i class="fas fa-calendar-alt mr-1"></i>
                                                {{ aula.data_aula|date:"d/m/Y" }}
                                            </span>
                                            <span class="text-xs text-gray-500 flex items-center">
                                                <i class="fas fa-clock mr-1"></i>
                                                {{ aula.horario_inicio }} - {{ aula.horario_fim }}
                                            </span>
                                            {% if aula.chamada_realizada %}
                                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">
                                                    <i class="fas fa-check mr-1"></i>
                                                    Chamada feita
                                                </span>
                                            {% else %}
                                                <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">
                                                    <i class="fas fa-clock mr-1"></i>
                                                    Pendente
                                                </span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-2">
                                    {% if not aula.chamada_realizada %}
                                        <a href="#" class="text-blue-600 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 transition-colors" title="Fazer Chamada">
                                            <i class="fas fa-user-check"></i>
                                        </a>
                                    {% endif %}
                                    <a href="#" class="text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-50 transition-colors" title="Ver Detalhes">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="p-12 text-center">
                    <i class="fas fa-calendar-times text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 mb-2">Nenhuma atividade recente</h3>
                    <p class="text-gray-500 mb-6">Comece registrando uma aula para ver as atividades aqui.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.body.setAttribute('data-page', 'dashboard');
</script>
{% include 'diario/diario_scripts.html' %}
{% endblock %}